{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rudra\\\\OneDrive\\\\Desktop\\\\BlogStation\\\\frontend\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport api from \"../api/axiosConfig\";\nimport PostCard from \"../components/PostCard\";\nimport Loader from \"../components/Loader\";\nimport { UserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n  const {\n    userId\n  } = useParams();\n  const {\n    user: currentUser\n  } = useContext(UserContext);\n  const [posts, setPosts] = useState([]);\n  const [username, setUsername] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    let mounted = true;\n    async function load() {\n      setLoading(true);\n      setError(\"\");\n      try {\n        const res = await api.get(`/api/posts/user/${userId}`);\n        if (!mounted) return;\n        const data = Array.isArray(res.data) ? res.data : res.data.posts || [];\n        setPosts(data || []);\n        if (data && data.length > 0) {\n          const author = data[0].author;\n          const derived = author && (author.username || author.name) || \"\";\n          setUsername(derived);\n        } else {\n          // Best-effort: try to get user info from /api/users/:userId (optional backend)\n          try {\n            var _ru$data, _ru$data2;\n            const ru = await api.get(`/api/users/${userId}`);\n            if (!mounted) return;\n            setUsername(((_ru$data = ru.data) === null || _ru$data === void 0 ? void 0 : _ru$data.username) || ((_ru$data2 = ru.data) === null || _ru$data2 === void 0 ? void 0 : _ru$data2.name) || \"\");\n          } catch (e) {\n            // ignore, username can remain blank\n          }\n        }\n      } catch (err) {\n        console.error(err);\n        if (!mounted) return;\n        setError(\"Failed to load posts. Please try again later.\");\n      } finally {\n        if (!mounted) return;\n        setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      mounted = false;\n    };\n  }, [userId]);\n\n  // callback when a post is deleted inside PostCard\n  const handleDeleted = deletedId => {\n    setPosts(prev => prev.filter(p => String(p._id) !== String(deletedId)));\n  };\n  const viewingOwnProfile = currentUser && String(currentUser._id || currentUser.id) === String(userId);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    style: {\n      maxWidth: \"1100px\",\n      margin: \"28px auto\",\n      padding: \"0 20px 60px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 18\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          fontFamily: \"'Poppins', sans-serif\",\n          marginBottom: 6\n        },\n        children: username ? `${username}'s posts` : \"User posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"kicker\",\n        style: {\n          marginTop: 4\n        },\n        children: viewingOwnProfile ? \"Viewing your profile\" : `Viewing posts by ${username || \"this user\"}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }, this), !loading && error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center\",\n      style: {\n        padding: 20\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"kicker\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this), !loading && !error && posts.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center\",\n      style: {\n        padding: 20\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"kicker\",\n        children: \"No posts found for this user.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this), !loading && !error && posts.length > 0 && /*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"posts-grid\",\n        children: posts.map(p => /*#__PURE__*/_jsxDEV(PostCard, {\n          post: p,\n          highlight: viewingOwnProfile,\n          onDeleted: handleDeleted\n        }, p._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"/YdK7zuA97sI6vd7u5HjV97JNR4=\", false, function () {\n  return [useParams];\n});\n_c = Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","api","PostCard","Loader","UserContext","jsxDEV","_jsxDEV","Profile","_s","userId","user","currentUser","posts","setPosts","username","setUsername","loading","setLoading","error","setError","mounted","load","res","get","data","Array","isArray","length","author","derived","name","_ru$data","_ru$data2","ru","e","err","console","handleDeleted","deletedId","prev","filter","p","String","_id","viewingOwnProfile","id","style","maxWidth","margin","padding","children","marginBottom","fontFamily","fileName","_jsxFileName","lineNumber","columnNumber","className","marginTop","map","post","highlight","onDeleted","_c","$RefreshReg$"],"sources":["C:/Users/Rudra/OneDrive/Desktop/BlogStation/frontend/src/pages/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport api from \"../api/axiosConfig\";\r\nimport PostCard from \"../components/PostCard\";\r\nimport Loader from \"../components/Loader\";\r\nimport { UserContext } from \"../context/UserContext\";\r\n\r\nexport default function Profile() {\r\n  const { userId } = useParams();\r\n  const { user: currentUser } = useContext(UserContext);\r\n\r\n  const [posts, setPosts] = useState([]);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      setLoading(true);\r\n      setError(\"\");\r\n      try {\r\n        const res = await api.get(`/api/posts/user/${userId}`);\r\n        if (!mounted) return;\r\n        const data = Array.isArray(res.data) ? res.data : (res.data.posts || []);\r\n        setPosts(data || []);\r\n\r\n        if (data && data.length > 0) {\r\n          const author = data[0].author;\r\n          const derived = author && (author.username || author.name) || \"\";\r\n          setUsername(derived);\r\n        } else {\r\n          // Best-effort: try to get user info from /api/users/:userId (optional backend)\r\n          try {\r\n            const ru = await api.get(`/api/users/${userId}`);\r\n            if (!mounted) return;\r\n            setUsername(ru.data?.username || ru.data?.name || \"\");\r\n          } catch (e) {\r\n            // ignore, username can remain blank\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n        if (!mounted) return;\r\n        setError(\"Failed to load posts. Please try again later.\");\r\n      } finally {\r\n        if (!mounted) return;\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, [userId]);\r\n\r\n  // callback when a post is deleted inside PostCard\r\n  const handleDeleted = (deletedId) => {\r\n    setPosts((prev) => prev.filter(p => String(p._id) !== String(deletedId)));\r\n  };\r\n\r\n  const viewingOwnProfile = currentUser && (String(currentUser._id || currentUser.id) === String(userId));\r\n\r\n  return (\r\n    <main style={{ maxWidth: \"1100px\", margin: \"28px auto\", padding: \"0 20px 60px\" }}>\r\n      <div style={{ marginBottom: 18 }}>\r\n        <h1 style={{ fontFamily: \"'Poppins', sans-serif\", marginBottom: 6 }}>\r\n          {username ? `${username}'s posts` : \"User posts\"}\r\n        </h1>\r\n        <p className=\"kicker\" style={{ marginTop: 4 }}>\r\n          {viewingOwnProfile ? \"Viewing your profile\" : `Viewing posts by ${username || \"this user\"}`}\r\n        </p>\r\n      </div>\r\n\r\n      {loading && <Loader />}\r\n\r\n      {!loading && error && (\r\n        <div className=\"center\" style={{ padding: 20 }}>\r\n          <p className=\"kicker\">{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && !error && posts.length === 0 && (\r\n        <div className=\"center\" style={{ padding: 20 }}>\r\n          <p className=\"kicker\">No posts found for this user.</p>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && !error && posts.length > 0 && (\r\n        <section>\r\n          <div className=\"posts-grid\">\r\n            {posts.map((p) => (\r\n              <PostCard\r\n                key={p._id}\r\n                post={p}\r\n                highlight={viewingOwnProfile}\r\n                onDeleted={handleDeleted}\r\n              />\r\n            ))}\r\n          </div>\r\n        </section>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}